{"ast":null,"code":"var _jsxFileName = \"/Users/JOOBOO/Desktop/projects/Accela/third_task/src/components/form.jsx\";\nimport React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\nimport { toast } from \"react-toastify\";\nimport { getAge } from \"../util/global\";\nimport Input from \"./input\";\nimport Select from \"./select\";\nimport DatePickerWrapper from \"./datepicker\";\nimport Country from \"./country\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FormWrapper extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {},\n      errors: {}\n    };\n\n    this.validate = () => {\n      const options = {\n        abortEarly: false\n      };\n      const result = Joi.validate(this.state.data, this.schema, options);\n      if (!result.error) return null;\n      const errors = {};\n      let item;\n\n      for (item of result.error.details) errors[item.path] = item.message;\n\n      return errors;\n    };\n\n    this.validateProperty = ({\n      name,\n      value\n    }) => {\n      const obj = {\n        [name]: value\n      };\n      const schema = {\n        [name]: this.schema[name]\n      };\n      const {\n        error\n      } = Joi.validate(obj, schema);\n      return error ? error.details[0].message : null;\n    };\n\n    this.handleChange = ({\n      currentTarget: input\n    }) => {\n      const errors = { ...this.state.errors\n      };\n      const errorMsg = this.validateProperty(input);\n      if (errorMsg) errors[input.name] = errorMsg;else delete errors[input.name];\n      const data = { ...this.state.data\n      };\n      data[input.name] = input.value;\n      this.setState({\n        data,\n        errors\n      });\n    };\n\n    this.handleBindChange = (name, value) => {\n      const {\n        data,\n        errors\n      } = this.state;\n      const input = {\n        name,\n        value\n      };\n      const errorMsg = this.validateProperty(input);\n      if (errorMsg) errors[input.name] = errorMsg;else delete errors[input.name];\n      data[name] = value;\n\n      if (name === \"date_of_birth\") {\n        const age = getAge(value);\n\n        if (age) {\n          data.age = age;\n        } else {\n          data.age = null;\n          data[name] = null;\n          errors[name] = true;\n        }\n      }\n\n      this.setState({\n        data,\n        errors\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const errors = this.validate();\n\n      if (errors) {\n        this.setState({\n          errors: errors || {}\n        });\n        return toast.error(\"Fill the below fields\");\n      }\n\n      this.doSubmit();\n    };\n\n    this.renderSubmitButton = (label, type = \"primary\") => {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        // disabled={this.validate()}\n        type: \"submit\",\n        className: `btn btn-${type} mr-2`,\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.renderButton = (label, event, type = \"primary\") => {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `btn btn-${type} mr-2`,\n        onClick: event,\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.renderInput = (name, label, placeholder = \"\", type = \"text\") => {\n      let {\n        data,\n        reset_key,\n        errors\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(Input, {\n        name: name,\n        label: label,\n        placeholder: placeholder,\n        type: type,\n        value: data[name],\n        onChange: this.handleChange,\n        error: errors[name] || \"\",\n        reset_key: reset_key\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.renderSelect = (name, label, options, placeholder = null) => {\n      let {\n        data,\n        reset_key,\n        errors\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(Select, {\n        name: name,\n        label: label,\n        options: options,\n        placeholder: placeholder,\n        value: data[name],\n        onChange: this.handleChange,\n        error: errors[name] || \"\",\n        reset_key: reset_key\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.renderCountry = (name, label) => {\n      let {\n        data,\n        reset_key,\n        errors\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(Country, {\n        name: name,\n        label: label,\n        value: data[name],\n        onChange: this.handleBindChange.bind(this, name),\n        error: errors[name] || \"\",\n        reset_key: reset_key\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.renderDatePicker = (name, label, placeholder = \"Select a date\") => {\n      let {\n        data,\n        reset_key,\n        errors\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(DatePickerWrapper, {\n        name: name,\n        label: label,\n        value: data[name] && new Date(data[name]),\n        placeholder: placeholder,\n        age: data.age,\n        onChange: this.handleBindChange.bind(this, name),\n        error: errors[name] || \"\",\n        reset_key: reset_key\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }, this);\n    };\n  }\n\n}\n\nexport default FormWrapper;","map":{"version":3,"sources":["/Users/JOOBOO/Desktop/projects/Accela/third_task/src/components/form.jsx"],"names":["React","Component","Joi","toast","getAge","Input","Select","DatePickerWrapper","Country","FormWrapper","state","data","errors","validate","options","abortEarly","result","schema","error","item","details","path","message","validateProperty","name","value","obj","handleChange","currentTarget","input","errorMsg","setState","handleBindChange","age","handleSubmit","e","preventDefault","doSubmit","renderSubmitButton","label","type","renderButton","event","renderInput","placeholder","reset_key","renderSelect","renderCountry","bind","renderDatePicker","Date"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\nimport { toast } from \"react-toastify\";\n\nimport { getAge } from \"../util/global\";\n\nimport Input from \"./input\";\nimport Select from \"./select\";\nimport DatePickerWrapper from \"./datepicker\";\nimport Country from \"./country\";\n\nclass FormWrapper extends Component {\n  state = {\n    data: {},\n    errors: {},\n  };\n\n  validate = () => {\n    const options = { abortEarly: false };\n    const result = Joi.validate(this.state.data, this.schema, options);\n\n    if (!result.error) return null;\n\n    const errors = {};\n    let item;\n    for (item of result.error.details) errors[item.path] = item.message;\n\n    return errors;\n  };\n\n  validateProperty = ({ name, value }) => {\n    const obj = { [name]: value };\n    const schema = { [name]: this.schema[name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null;\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    const errors = { ...this.state.errors };\n    const errorMsg = this.validateProperty(input);\n    if (errorMsg) errors[input.name] = errorMsg;\n    else delete errors[input.name];\n\n    const data = { ...this.state.data };\n    data[input.name] = input.value;\n    this.setState({ data, errors });\n  };\n\n  handleBindChange = (name, value) => {\n    const { data, errors } = this.state;\n\n    const input = {\n      name,\n      value,\n    };\n\n    const errorMsg = this.validateProperty(input);\n    if (errorMsg) errors[input.name] = errorMsg;\n    else delete errors[input.name];\n\n    data[name] = value;\n\n    if (name === \"date_of_birth\") {\n      const age = getAge(value);\n\n      if (age) {\n        data.age = age;\n      } else {\n        data.age = null;\n        data[name] = null;\n        errors[name] = true;\n      }\n    }\n\n    this.setState({ data, errors });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    const errors = this.validate();\n    if (errors) {\n      this.setState({ errors: errors || {} });\n      return toast.error(\"Fill the below fields\");\n    }\n\n    this.doSubmit();\n  };\n\n  renderSubmitButton = (label, type = \"primary\") => {\n    return (\n      <button\n        // disabled={this.validate()}\n        type=\"submit\"\n        className={`btn btn-${type} mr-2`}\n      >\n        {label}\n      </button>\n    );\n  };\n\n  renderButton = (label, event, type = \"primary\") => {\n    return (\n      <button type=\"button\" className={`btn btn-${type} mr-2`} onClick={event}>\n        {label}\n      </button>\n    );\n  };\n\n  renderInput = (name, label, placeholder = \"\", type = \"text\") => {\n    let { data, reset_key, errors } = this.state;\n\n    return (\n      <Input\n        name={name}\n        label={label}\n        placeholder={placeholder}\n        type={type}\n        value={data[name]}\n        onChange={this.handleChange}\n        error={errors[name] || \"\"}\n        reset_key={reset_key}\n      />\n    );\n  };\n\n  renderSelect = (name, label, options, placeholder = null) => {\n    let { data, reset_key, errors } = this.state;\n\n    return (\n      <Select\n        name={name}\n        label={label}\n        options={options}\n        placeholder={placeholder}\n        value={data[name]}\n        onChange={this.handleChange}\n        error={errors[name] || \"\"}\n        reset_key={reset_key}\n      />\n    );\n  };\n\n  renderCountry = (name, label) => {\n    let { data, reset_key, errors } = this.state;\n\n    return (\n      <Country\n        name={name}\n        label={label}\n        value={data[name]}\n        onChange={this.handleBindChange.bind(this, name)}\n        error={errors[name] || \"\"}\n        reset_key={reset_key}\n      />\n    );\n  };\n\n  renderDatePicker = (name, label, placeholder = \"Select a date\") => {\n    let { data, reset_key, errors } = this.state;\n\n    return (\n      <DatePickerWrapper\n        name={name}\n        label={label}\n        value={data[name] && new Date(data[name])}\n        placeholder={placeholder}\n        age={data.age}\n        onChange={this.handleBindChange.bind(this, name)}\n        error={errors[name] || \"\"}\n        reset_key={reset_key}\n      />\n    );\n  };\n}\n\nexport default FormWrapper;\n"]},"metadata":{},"sourceType":"module"}